<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dashboard</title>
  <!-- CSS FILES.. -->
  <link rel="stylesheet" href="common/css/style_e.css">
  <link rel="stylesheet" href="common/scss/style.css">
</head>
<body>

<header class="layout-header">
  <div class="layout-header-top">
    <div class="header-top-left js-header-top-left">
      <img src="images/E/HEADER/logo.svg" alt="채널 미들웨어" class="header-logo">
      <button class="header-menu-button js-header-menu-button">
        <img src="images/E/HEADER/menu.png" alt="">
      </button>
    </div>
    <div class="header-top-right">
      <article class="container-component">
        <!--add-->
        <div>
          <button class="header-task-button">
            <mark class="badge">1</mark>
          </button>
          <div class="rollingbanner">
            <div class="title">재고 동기화 업데이트 현황</div>
            <div class="wrap">
              <ul>
                <li class="next"><a href="http://49.50.164.144/admin/task/taskdetail/008?view_type_std=prod_out">- 상품품절
                  채널 전송 =&gt; 2건(14:00) </a></li>
                <li class=""><a href="http://49.50.164.144/admin/task/taskdetail/007?view_type_std=sku_out">- 옵션품절 채널 전송
                  =&gt; 3건(14:00)</a></li>
                <li class="prev"><a href="#"></a><a
                  href="http://49.50.164.144/admin/task/taskdetail/007?view_type_std=sku_nomal">- 재고차감 채널 전송 =&gt;
                  3건(14:00)</a></li>
                <li class="current"><a href="#">- 채널 전송 오류 : 3건(14:00)</a></li>
              </ul>
            </div>
          </div>
        </div>

        <!--add-->
        <div class="dashboard-right-container-component">
          <a href="" class="header-help-link">
            <img src="images/common/help.svg" alt="">
            <span class="header-help-link__text">Need help?</span>
          </a>
          <div class="notice-container-component">
            <div class="notice-count-component">1</div>
            <img src="images/common/alarm.svg" alt="NOTICE" title="NOTICE">
          </div>
          <div class="notice-list-container-component">
            <div class="notice-list-title-container-component">
              <div class="notice-list-title-component">
                <div class="notice-list-left-title-component">
                  <p>받은 알림</p>
                  <span>2</span>
                </div>
                <div class="notice-list-right-title-component">
                  <button>모두 확인</button>
                </div>
              </div>
              <p><span>최근 30일 동안</span>의 알림만 보관됩니다.</p>
            </div>
            <div class="notice-list-check-close-container-component">
              <div class="notice-list-check-close-item-component check">
                <div class="notice-list-check-close-title-container">
                  <div class="notice-list-check-close-left-title-component">
                    알림 내용 내용알림 내용 내용
                  </div>
                  <div class="notice-list-check-close-right-title-component">
                    <button>확인</button>
                  </div>
                  <div class="notice-list-date-time-container-component">
                    <span>2021.11.21</span>
                    <span>|</span>
                    <span>오후 3시 30분</span>
                  </div>
                </div>
              </div>
              <div class="notice-list-check-close-item-component check">
                <div class="notice-list-check-close-title-container">
                  <div class="notice-list-check-close-left-title-component">
                    알림 내용 내용알림 내용 내용 내용이 아주 길 경우 두줄 까지 노출 놀출
                  </div>
                  <div class="notice-list-check-close-right-title-component">
                    <button>확인</button>
                  </div>
                  <div class="notice-list-date-time-container-component">
                    <span>2021.11.21</span>
                    <span>|</span>
                    <span>오후 3시 30분</span>
                  </div>
                </div>
              </div>
              <div class="notice-list-check-close-item-component">
                <div class="notice-list-check-close-title-container">
                  <div class="notice-list-check-close-left-title-component">
                    확인한 알림의 경우 우측에 삭제 버튼 노출
                  </div>
                  <div class="notice-list-check-close-right-title-component">
                    <button><img src="images/E/HEADER/icon-12-x-12-line-delete/icon-12-x-12-line-delete.webp"
                                 alt="DELETE"
                                 title="DELETE"></button>
                  </div>
                  <div class="notice-list-date-time-container-component">
                    <span>2021.11.21</span>
                    <span>|</span>
                    <span>오후 3시 30분</span>
                  </div>
                </div>
              </div>
              <div class="notice-list-check-close-item-component">
                <div class="notice-list-check-close-title-container">
                  <div class="notice-list-check-close-left-title-component">
                    알림은 시간순으로 노출 (최신이 상단에)
                  </div>
                  <div class="notice-list-check-close-right-title-component">
                    <button><img src="images/E/HEADER/icon-12-x-12-line-delete/icon-12-x-12-line-delete.webp"
                                 alt="DELETE"
                                 title="DELETE"></button>
                  </div>
                  <div class="notice-list-date-time-container-component">
                    <span>2021.11.21</span>
                    <span>|</span>
                    <span>오후 3시 30분</span>
                  </div>
                </div>
              </div>
              <div class="notice-list-check-close-item-component">
                <div class="notice-list-check-close-title-container">
                  <div class="notice-list-check-close-left-title-component">
                    알림 내용 내용알림 내용 내용
                  </div>
                  <div class="notice-list-check-close-right-title-component">
                    <button><img src="images/E/HEADER/icon-12-x-12-line-delete/icon-12-x-12-line-delete.webp"
                                 alt="DELETE"
                                 title="DELETE"></button>
                  </div>
                  <div class="notice-list-date-time-container-component">
                    <span>2021.11.21</span>
                    <span>|</span>
                    <span>오후 3시 30분</span>
                  </div>
                </div>
              </div>
              <div class="notice-list-check-close-item-component">
                <div class="notice-list-check-close-title-container">
                  <div class="notice-list-check-close-left-title-component">
                    알림은 시간순으로 노출 (최신이 상단에)
                  </div>
                  <div class="notice-list-check-close-right-title-component">
                    <button><img src="images/E/HEADER/icon-12-x-12-line-delete/icon-12-x-12-line-delete.webp"
                                 alt="DELETE"
                                 title="DELETE"></button>
                  </div>
                  <div class="notice-list-date-time-container-component">
                    <span>2021.11.21</span>
                    <span>|</span>
                    <span>오후 3시 30분</span>
                  </div>
                </div>
              </div>
              <div class="notice-list-check-close-item-component">
                <div class="notice-list-check-close-title-container">
                  <div class="notice-list-check-close-left-title-component">
                    알림 내용 내용알림 내용 내용
                  </div>
                  <div class="notice-list-check-close-right-title-component">
                    <button><img src="images/E/HEADER/icon-12-x-12-line-delete/icon-12-x-12-line-delete.webp"
                                 alt="DELETE"
                                 title="DELETE"></button>
                  </div>
                  <div class="notice-list-date-time-container-component">
                    <span>2021.11.21</span>
                    <span>|</span>
                    <span>오후 3시 30분</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="header-user-info js-select-box-blue-component">
            <img src="images/common/profile.svg" alt="" class="header-user-info__profile">
            <span class="header-user-info__user">관리자</span>
            <img src="images/E/HEADER/icon-8-x-8-line-arrow-down/icon-8-x-8-line-arrow-down.webp"
                 alt="ARROW DOWN" title="ARROW DOWN">

            <div class="select-box-blue-option-container-component">
              <div class="select-box-blue-option-component">
                <div class="select-box-blue-option-img"></div>
                <span>정보 변경</span>
              </div>
              <div class="select-box-blue-option-component js-adm-manage-button">
                <div class="select-box-blue-option-img"></div>
                <span>계정 관리</span>
              </div>
              <div class="select-box-blue-option-component">
                <div class="select-box-blue-option-img"></div>
                <span> <a href="/logout" style="text-decoration:none;">로그아웃</a></span>
              </div>
            </div>
          </div>
        </div>

      </article>
    </div>
  </div>
</header>

<!-- CONTENT AREA -->
<div class="content-area">
  <!-- DRAWER AREA -->
  <nav id="drawer-component" class="js-left-nav left-nav">
    <ul class="left-nav-list">
      <li class="left-nav__item alone js-left-nav-item">
        <a href="/" class="left-nav-first type--link ">
          <i class="left-nav__icon"></i>
          <strong class="left-nav__text left-nav__first-text">
            Dashboard
          </strong>
        </a>
        <div class="left-nav-depth-area js-left-nav-depth-area">
          <ul class="left-nav-depth js-left-nav-depth">
            <li class="left-nav-depth__item">
              <a href="/" class="left-nav-depth__link left-nav__text">Dashboard</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="left-nav__item js-left-nav-item">
        <div class="left-nav-first js-left-nav-first">
          <i class="left-nav__icon"></i>
          <strong class="left-nav__text left-nav__first-text">
            Inventory
          </strong>
        </div>
        <div class="left-nav-depth-area js-left-nav-depth-area">
          <ul class="left-nav-depth js-left-nav-depth">
            <li class="left-nav-depth__item title">
              Inventory
            </li>
            <li class="left-nav-depth__item">
              <a href="/admin/inventory/list" class="left-nav-depth__link left-nav__text">재고관리</a>
            </li>
            <li class="left-nav-depth__item">
              <a href="/admin/inventory/renw" class="left-nav-depth__link left-nav__text">재고관리 리뉴얼</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="left-nav__item js-left-nav-item">
        <div class="left-nav-first js-left-nav-first">
          <i class="left-nav__icon"></i>
          <strong class="left-nav__text left-nav__first-text">
            Products
          </strong>
        </div>
        <div class="left-nav-depth-area js-left-nav-depth-area">
          <ul class="left-nav-depth js-left-nav-depth">
            <li class="left-nav-depth__item title">
              Products
            </li>
            <li class="left-nav-depth__item">
              <a href="/admin/product/prodreg/basic" class="left-nav-depth__link left-nav__text">상품등록</a>
            </li>
            <li class="left-nav-depth__item">
              <a href="/admin/product/prodreg/prodlist" class="left-nav-depth__link left-nav__text">상품리스트</a>
            </li>
            <li class="left-nav-depth__item">
              <a href="/admin/product/prodreg/nw" class="left-nav-depth__link left-nav__text">상품등록 리뉴얼</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="left-nav__item js-left-nav-item">
        <div class="left-nav-first js-left-nav-first">
          <i class="left-nav__icon"></i>
          <strong class="left-nav__text left-nav__first-text">
            채널상품
          </strong>
        </div>
        <div class="left-nav-depth-area js-left-nav-depth-area">
          <ul class="left-nav-depth js-left-nav-depth">
            <li class="left-nav-depth__item title">
              채널상품
            </li>
            <li class="left-nav-depth__item">
              <a href="/admin/channel-product/mapping-prodlist" class="left-nav-depth__link left-nav__text">매핑 상품리스트</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="left-nav__item alone js-left-nav-item">
        <a href="/admin/task/taskdetail/004" class="left-nav-first type--link">
          <i class="left-nav__icon"></i>
          <strong class="left-nav__text left-nav__first-text">
            작업내역
          </strong>
        </a>
        <div class="left-nav-depth-area js-left-nav-depth-area">
          <ul class="left-nav-depth js-left-nav-depth">
            <li class="left-nav-depth__item">
              <a href="/admin/task/taskdetail/004" class="left-nav-depth__link left-nav__text">작업내역</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="left-nav__item alone js-left-nav-item">
        <a href="/admin/user/user_info" class="left-nav-first type--link">
          <i class="left-nav__icon"></i>
          <strong class="left-nav__text left-nav__first-text">
            사용자관리
          </strong>
        </a>
        <div class="left-nav-depth-area js-left-nav-depth-area">
          <ul class="left-nav-depth js-left-nav-depth">
            <li class="left-nav-depth__item">
              <a href="/admin/user/user_info" class="left-nav-depth__link left-nav__text">사용자관리</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="left-nav__item js-left-nav-item current">
        <div class="left-nav-first js-left-nav-first">
          <i class="left-nav__icon"></i>
          <strong class="left-nav__text left-nav__first-text">
            설정
          </strong>
        </div>
        <div class="left-nav-depth-area js-left-nav-depth-area">
          <ul class="left-nav-depth js-left-nav-depth">
            <li class="left-nav-depth__item title">
              설정
            </li>
            <li class="left-nav-depth__item current">
              <a href="/admin/setup/channel/chlist" class="left-nav-depth__link left-nav__text">채널 설정</a>
            </li>
            <li class="left-nav-depth__item">
              <a href="/admin/setup/schedule/schview" class="left-nav-depth__link left-nav__text">스케줄 설정</a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </nav>

  <!-- DRAWER AREA END -->
  <div class="right-content-area js-right-content-area">
    <section id="content-component">
      <div class="dashboard-area new">
        <h1 class="dashboard__title">Dashboard</h1>
        <div class="dashboard-top-content-area">
          <div class="dashboard-top-content">
            <div class="dashboard-top-top">
              <div class="dashboard-top-left">
                <strong class="dashboard-top__amount">51</strong>
                <small class="dashboard-top__label">전체품목</small>
              </div>
              <i class="dashboard-top__icon"></i>
            </div>
            <div class="dashboard-top-bottom">
              <small class="dashboard-percent__label">40%</small>
              <div class="dashboard-percent-line">
                <div class="dashboard-percent__line"></div>
              </div>
            </div>
          </div>
          <div class="dashboard-top-content">
            <div class="dashboard-top-top">
              <div class="dashboard-top-left">
                <strong class="dashboard-top__amount">51</strong>
                <small class="dashboard-top__label">전체품목</small>
              </div>
              <i class="dashboard-top__icon"></i>
            </div>
            <div class="dashboard-top-bottom">
              <small class="dashboard-percent__label">40%</small>
              <div class="dashboard-percent-line">
                <div class="dashboard-percent__line"></div>
              </div>
            </div>
          </div>
          <div class="dashboard-top-content">
            <div class="dashboard-top-top">
              <div class="dashboard-top-left">
                <strong class="dashboard-top__amount">51</strong>
                <small class="dashboard-top__label">전체품목</small>
              </div>
              <i class="dashboard-top__icon"></i>
            </div>
            <div class="dashboard-top-bottom">
              <small class="dashboard-percent__label">40%</small>
              <div class="dashboard-percent-line">
                <div class="dashboard-percent__line"></div>
              </div>
            </div>
          </div>
          <div class="dashboard-top-content">
            <div class="dashboard-top-top">
              <div class="dashboard-top-left">
                <strong class="dashboard-top__amount">51</strong>
                <small class="dashboard-top__label">전체품목</small>
              </div>
              <i class="dashboard-top__icon"></i>
            </div>
            <div class="dashboard-top-bottom">
              <small class="dashboard-percent__label">40%</small>
              <div class="dashboard-percent-line">
                <div class="dashboard-percent__line"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="dashboard-middle">
          <div class="dashboard-middle-content dashboard-chart-content js-chart-feed">
            <div class="">
              <div class="dashboard-left-title-component">
                <div class="dashboard-main-title-component">재고 전송 트래픽 현황</div>
                <div class="dashboard-date-component">2021.11.20</div>
              </div>
              <div class="dashboard-right-title-container-component">
                <div class="select-box-gray-component small">
                  <span>금일 기준</span><img src="images/E/FEED/icon-8-x-8-line-arrow-down/icon-8-x-8-line-arrow-down.webp"
                                         alt="ARROW DOWN" title="ARROW DOWN">

                  <div class="select-box-blue-option-container-component">
                    <div class="select-box-blue-option-component">
                      <span>금일 기준</span>
                    </div>
                    <div class="select-box-blue-option-component">
                      <span>주간 기준</span>
                    </div>
                    <div class="select-box-blue-option-component">
                      <span>월간 기준</span>
                    </div>
                  </div>
                </div>
                <button class="btn-dashboard-next dashboard-next-button small"></button>
              </div>
            </div>
            <div class="dashboard-content js-dashboard-content">
              <div class="chart-area"></div>
              <div id="tooltip" class="tooltip"></div>
            </div>
          </div>
          <div class="dashboard-middle-content dashboard-table-content">
            <h2 class="dashboard__title table-title">카테고리</h2>
            <ul class="dashboard-table-ul dashboard-table-head">
              <li class="dashboard-table-th">Option Name</li>
              <li class="dashboard-table-th">Option Name</li>
              <li class="dashboard-table-th">Option Name</li>
            </ul>
            <div class="dashboard-table-body-area">
              <ul class="dashboard-table-ul dashboard-table-body">
                <li class="dashboard-table-td">Lorem ipsum</li>
                <li class="dashboard-table-td">322</li>
                <li class="dashboard-table-td dashboard-table-percent down">-4.66%</li>
              </ul>
              <ul class="dashboard-table-ul dashboard-table-body">
                <li class="dashboard-table-td">Lorem ipsum</li>
                <li class="dashboard-table-td">322</li>
                <li class="dashboard-table-td dashboard-table-percent up">+4.66%</li>
              </ul>
              <ul class="dashboard-table-ul dashboard-table-body">
                <li class="dashboard-table-td">Lorem ipsum</li>
                <li class="dashboard-table-td">322</li>
                <li class="dashboard-table-td dashboard-table-percent down">-4.66%</li>
              </ul>
              <ul class="dashboard-table-ul dashboard-table-body">
                <li class="dashboard-table-td">Lorem ipsum</li>
                <li class="dashboard-table-td">322</li>
                <li class="dashboard-table-td dashboard-table-percent up">+4.66%</li>
              </ul>
              <ul class="dashboard-table-ul dashboard-table-body">
                <li class="dashboard-table-td">Lorem ipsum</li>
                <li class="dashboard-table-td">322</li>
                <li class="dashboard-table-td dashboard-table-percent down">-4.66%</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="dashboard-bottom">
          <div class="dashboard-bottom-content">
            <i class="dashboard-bottom__icon"></i>
            <a class="dashboard-bottom__link">
              <strong class="dashboard-bottom__subject">name</strong>
              <span class="dashboard-bottom__subject-sub">learn more</span>
            </a>
          </div>
          <div class="dashboard-bottom-content">
            <i class="dashboard-bottom__icon"></i>
            <a class="dashboard-bottom__link">
              <strong class="dashboard-bottom__subject">name</strong>
              <span class="dashboard-bottom__subject-sub">learn more</span>
            </a>
          </div>
          <div class="dashboard-bottom-content">
            <i class="dashboard-bottom__icon"></i>
            <a class="dashboard-bottom__link">
              <strong class="dashboard-bottom__subject">name</strong>
              <span class="dashboard-bottom__subject-sub">learn more</span>
            </a>
          </div>
        </div>
      </div>
    </section>
  </div>

</div>

<!-- JAVASCRIPT FILES.. -->
<script src="common/js/jquery-3.6.0.min.js"></script>
<script src="common/js/datepicker.min.js"></script>
<script src="common/js/datepicker.ko-KR.js"></script>
<script src="common/js/sweetalert2.min.js"></script>
<script src="common/js/bootstrap.bundle.min.js"></script>
<script src="common/js/d3.v4.min.js"></script>

<script src="common/js/renew.js"></script>

<!-- jQuery .. -->
<script>

  $(function () {
    const headerHeight = 68
    setLeftNavHeight()

    if ($(window).width() <= 1200) {
      setFoldMenu()
    } else {
      clearFoldMenu()
    }

    $(window).resize(function () {
      setLeftNavHeight()
      if ($(window).width() <= 1200) {
        setFoldMenu()
      } else {
        clearFoldMenu()
      }
    })

    $(window).scroll(function () {
      setLeftNavHeight()
    })

    function setLeftNavHeight () {
      $('.js-left-nav').css({
        height: $(window).height() - headerHeight + 'px',
      })
    }

    // 메뉴 클릭시
    $('.js-left-nav-first').on('click', function () {
      const targetLi = $(this).parent()
      if (targetLi.children('.js-left-nav-depth-area').is(':visible')) {
        // 보이는상태
        $('.js-left-nav-item .js-left-nav-depth-area').slideUp(200)
        $('.js-left-nav-item').removeClass('open')
      } else {
        //안보이는상태
        $('.js-left-nav-item').removeClass('open')
        $('.js-left-nav-item .js-left-nav-depth-area').slideUp(200)
        targetLi.addClass('open')
        $(this).next('.js-left-nav-depth-area').slideDown(200)
      }
    })

    // 메뉴 확대/축소 버튼
    $('.js-header-menu-button').on('click', function () {
      $('.js-left-nav').toggleClass('fold')
      $('.js-header-top-left').toggleClass('fold')
      $('.js-right-content-area').toggleClass('wide')
    })

    // 왼쪽메뉴 접기
    function setFoldMenu () {
      $('.js-left-nav').addClass('fold')
      $('.js-header-top-left').addClass('fold')
      $('.js-right-content-area').addClass('wide')
    }

    // 왼쪽메뉴 펴기
    function clearFoldMenu () {
      $('.js-left-nav').removeClass('fold')
      $('.js-header-top-left').removeClass('fold')
      $('.js-right-content-area').removeClass('wide')
    }


    // 하나씩 나타나는 효과
    let marginTopSize = 20
    for (let i = 1; i <= 9; i++) {
      if (i === 3)
        marginTopSize = 0

      $('.dashboard-feed-component').eq(i - 1).delay(100 * i).animate({
        marginTop: marginTopSize + 'px',
        opacity: 1,
      }, 200)
    }
    // 하나씩 나타나는 효과

    // 선형차트
    function removeChart (element) {
      d3.select(element).remove()
    }

    function drawChart (data, w, h, size) {
      const width = w
      const height = h
      const margin = { top: 54, right: 10, bottom: 70, left: size === 'wide' ? 60 : 60 }
      const startEndSpace = size === 'wide' ? 44 : 35
      const dayArray = data[0].values.map(item => (item.date))
      const chartHeight = height - margin.bottom - margin.top

      const x = d3.scalePoint()
        .domain(dayArray)
        .range([ startEndSpace * 2, width + (size === 'wide' ? -startEndSpace : -startEndSpace / 4) ])

      const maxY = d3.max(data[0].values, d => d.value) >= d3.max(data[1].values, d => d.value) ? d3.max(data[0].values, d => d.value) : d3.max(data[1].values, d => d.value)
      const y = d3.scaleLinear()
        .domain([ 0, maxY ]).nice()
        .range([ chartHeight + margin.top, margin.top ]).clamp(true)

      const xAxis =
        g => g.attr('transform', `translate(0, ${ height - 46 })`)
          .style('font-size', `12px`).style('fill', '#4b4b4b').attr('font-weight', 800).attr('class', 'x-axis')
          .call(
            size === 'wide' ? d3.axisBottom(x).ticks().tickFormat(d => d) : d3.axisBottom(x).ticks().tickFormat(d => d).tickValues(x.domain().filter(function (d, idx) {
              return idx % 2 == 0
            }))
          )
          .call(g => g.selectAll('line').remove())
          .call(g => g.select('.domain').remove())
          .call(g => g.selectAll('text').style('fill', '#9499ab')).style('font-size', `12px`).style('font-weight', 500)

      const yAxis = g => g
        .attr('transform', `translate(${ margin.left },0)`).attr('class', 'y-axis')
        .call(d3.axisLeft(y).tickFormat((d) => d.toLocaleString()))
        .call(g => g.select('.domain').remove())
        .call(g => g.select('.domain').remove())
        .call(g => g.selectAll('line')
          .attr('x2', width - margin.left)
          .style('stroke', '#edeff4'))
        .call(g => g.selectAll('text')
          .style('fill', '#9499ab')).style('font-size', `12px`).style('font-weight', 500)

      const line = d3.line()
        .curve(d3.curveBasis)
        .x(d => x(d.date))
        .y(d => y(d.value))

      const area = d3.area()
        .curve(d3.curveBasis)
        .x(d => x(d.date))
        .y0(y(0))
        .y1(d => y(d.value))

      const svg = d3.select('.chart-area').append('svg').attr('class', 'chart').attr('width', width).attr('height', height)

      svg.append('g').call(xAxis)
      svg.append('g').call(yAxis)

      //label
      const labelGroup = svg.append('g')
        .attr('transform', `translate(${ width - 130 }, 30)`)
        .attr('class', 'label')
      const label1Marker = labelGroup.append('g')
      label1Marker.append('text')
        .text('생산')
        .attr('font-size', '14')
        .attr('fill', '#4b4b4b')
      label1Marker.append('rect')
        .attr('class', 'myPoint')
        .attr('rx', 5).attr('ry', 5).attr('x', 0).attr('y', 0).attr('width', 10).attr('height', 10)
        .attr('fill', data[0].color)
        .attr('transform', 'translate(30,-10)')

      const label2Marker = labelGroup.append('g').attr('transform', 'translate(60,0)')
      label2Marker.append('text')
        .text('매출')
        .attr('font-size', '14')
        .attr('fill', '#4b4b4b')
      label2Marker.append('rect')
        .attr('class', 'myPoint')
        .attr('rx', 5).attr('ry', 5).attr('x', 0).attr('y', 0).attr('width', 10).attr('height', 10)
        .attr('fill', data[1].color)
        .attr('transform', 'translate(30,-10)')

      // 선1 -- 그림자
      const line1Shadow = svg.append('defs')
        .append('filter')
        .attr('id', 'dropshadow')
        .append('feDropShadow')
        .attr('dx', 0)
        .attr('dy', 5)
        .attr('stdDeviation', 0.5)
        .attr('flood-color', 'rgba(0, 0, 0, 0.08)')

      // 선1 -- 영역그라데이션추가
      const grad = svg.append('defs').append('linearGradient')
        .attr('id', 'grad')
        .attr('x1', '0%')
        .attr('x2', '0%')
        .attr('y1', '0%')
        .attr('y2', '100%')

      grad.append('stop')
        .attr('offset', '50%')
        .style('stop-color', 'rgba(34, 113, 255, 0.15)')
        .style('stop-opacity', 1)

      grad.append('stop')
        .attr('offset', '100%')
        .style('stop-color', 'rgba(128, 214, 255, 0.02')
        .style('stop-opacity', 0)


      // 선1 데이터(생산)
      const value1 = data[0].values
      // 선2 데이터
      const value2 = data[1].values
      // 선1 -- 영역 추가
      // svg.append('path')
      //   .datum(value1)
      //   .style('fill', 'url(#grad)')
      //   .attr('d', line)
      //   .attr('d', area)
      //   .attr('class', 'area')

      // 선1 -- 선추가
      svg.append('path')
        .datum(value1)
        .attr('fill', 'none')
        .attr('stroke', data[0].color)
        .attr('stroke-width', 2.5)
        .attr('stroke-linejoin', 'round')
        .attr('stroke-linecap', 'round')
        .attr('d', line)
        .attr('class', 'path line')


      // 선1 -- 선추가
      // svg.append('path')
      //   .datum(value1)
      //   .attr('fill', 'none')
      //   .attr('stroke', '#4c8cff')
      //   .attr('stroke-width', 2.5)
      //   .attr('stroke-linejoin', 'round')
      //   .attr('stroke-linecap', 'round')
      //   .attr('d', line)
      //   .attr('class', 'path shadow')

      const areaOutlineT = d3.select('.area')
      const clipPath = svg.append('clipPath').attr('id', 'clip1')
      const clip = clipPath.append('rect').attr('class', 'clip-path')
      clip.attr('x', -width).attr('y', 0).attr('width', width).attr('height', height)

      const pathOutline = document.querySelector('.path')
      const pathOutlineT = d3.select('.path')
      const pathLineL = pathOutline.getTotalLength()

      areaOutlineT.attr('id', 'poly-1').attr('clip-path', `url('#clip1')`)
      pathOutlineT.attr('stroke-dasharray', pathLineL).attr('stroke-dashoffset', pathLineL)
      clip.transition().duration(1500).ease(d3.easeQuadInOut).attr('transform', `matrix(1,0,0,1,${ width },0)`)

      // 선2


      // 선2 -- 영역그라데이션추가
      const grad2 = svg.append('defs').append('linearGradient')
        .attr('id', 'grad2')
        .attr('x1', '0%')
        .attr('x2', '0%')
        .attr('y1', '0%')
        .attr('y2', '100%')

      grad2.append('stop')
        .attr('offset', '16%')
        .style('stop-color', 'rgba(53, 215, 170, 0.2)')
        .style('stop-opacity', 1)

      grad2.append('stop')
        .attr('offset', '100%')
        .style('stop-color', 'rgba(53, 215, 170, 0.02)')
        .style('stop-opacity', 0)


      //선2 -- 영역 추가
      // svg.append('path')
      //   .datum(value2)
      //   .style('fill', 'url(#grad2)')
      //   .attr('d', line)
      //   .attr('d', area)
      //   .attr('class', 'area2')

      // 선2 -- 선추가
      svg.append('path')
        .datum(value2)
        .attr('fill', 'none')
        .attr('stroke', data[1].color)
        .attr('stroke-width', 2.5)
        .attr('stroke-linejoin', 'round')
        .attr('stroke-linecap', 'round')
        .attr('d', line)
        .attr('class', 'path2 line')

      // 선2 -- 선 그림자
      // svg.append('path')
      //   .datum(value2)
      //   .attr('fill', 'none')
      //   .attr('stroke', '#35d7aa')
      //   .attr('stroke-width', 2.5)
      //   .attr('stroke-linejoin', 'round')
      //   .attr('stroke-linecap', 'round')
      //   .attr('d', line)
      //   .attr('class', 'path2 shadow')

      const area2OutlineT = d3.select('.area2')
      const clipPath2 = svg.append('clipPath').attr('id', 'clip2')
      const clip2 = clipPath2.append('rect').attr('class', 'clip-path')
      clip2.attr('x', -width).attr('y', 0).attr('width', width).attr('height', height)

      const pathOutline2 = document.querySelector('.path2')
      const pathOutlineT2 = d3.select('.path2')
      const pathLineL2 = pathOutline2.getTotalLength()

      area2OutlineT.attr('id', 'poly-1').attr('clip-path', `url('#clip2')`)
      pathOutlineT2.attr('stroke-dasharray', pathLineL2).attr('stroke-dashoffset', pathLineL2)
      clip2.transition().duration(1500).ease(d3.easeQuadInOut).attr('transform', `matrix(1,0,0,1,${ width },0)`)


      const tooltip = d3.select('#tooltip')
      const mouseG = svg.append('g')
        .attr('class', 'mouse-over-effects')

      mouseG.append('path')
        .attr('class', 'mouse-line')
        .style('stroke', '#ddd')
        .style('stroke-width', '1px')
        .style('opacity', '0')

      const lines = document.getElementsByClassName('line')

      const mousePerLine = mouseG.selectAll('.mouse-per-line')
        .data(data)
        .enter()
        .append('g')
        .attr('class', 'mouse-per-line')

      mousePerLine.append('circle')
        .attr('r', 3.5)
        .style('stroke', (d) => {
          return d.color
        })
        .style('fill', (d) => {
          return d.color
        })
        .style('stroke-width', '1px')
        .style('opacity', '0')

      mousePerLine.append('text')
        .attr('transform', 'translate(10,3)')

      mouseG.append('svg:rect')
        .attr('width', width - (size === 'wide' ? startEndSpace * 3 : startEndSpace * 2 + startEndSpace / 4))
        .attr('height', height - margin.bottom)
        .attr('transform', `translate(${ startEndSpace * 2 },${ margin.top })`)
        .attr('fill', 'none')
        .attr('pointer-events', 'all')
        .on('mouseout', function () {
          d3.select('.mouse-line').style('opacity', '0')
          d3.selectAll('.mouse-per-line circle').style('opacity', '0')
          d3.selectAll('.mouse-per-line text').style('opacity', '0')
          removeTooltip()
        })
        .on('mouseover', function () {
          d3.select('.mouse-line').style('opacity', '1')
          d3.selectAll('.mouse-per-line circle').style('opacity', '1')
          d3.selectAll('.mouse-per-line text').style('opacity', '1')
        })
        .on('mousemove', function () {
          const mouse = d3.mouse(this),
            xPos = mouse[0] + startEndSpace * 2,
            domain = x.domain(),
            range = x.range(),
            rangePoints = d3.range(range[0] - (startEndSpace), range[1] - (startEndSpace), x.step()),
            yPos = domain[d3.bisect(rangePoints, (xPos - startEndSpace * 2))]

          d3.select('.mouse-line')
            .attr('d', function () {
              let d = 'M' + xPos + ',' + (height - margin.bottom)
              d += ' ' + xPos + ',' + 54
              return d
            })
          d3.selectAll('.mouse-per-line')
            .attr('transform', function (d, i) {
              let pos,
                beginning = 0,
                end = lines[i].getTotalLength(),
                target = null

              while (true) {
                target = Math.floor((beginning + end) / 2)
                pos = lines[i].getPointAtLength(target)
                if ((target === end || target === beginning) && pos.x !== xPos) {
                  break
                }
                if (pos.x > xPos) end = target
                else if (pos.x < xPos) beginning = target
                else break
              }

              return 'translate(' + xPos + ',' + pos.y + ')'
            })
          tooltip.html(yPos)
            .style('display', 'block')
            .style('left', leftPosition())
            // .style('left',`calc(${ d3.event.pageX }px - 30vw)`)
            .style('top', `calc(${ d3.event.pageY - 200 }px)`)
            .selectAll()
            .data(data).enter()
            .append('div')
            .attr('class', 'tooltip-content')
            .style('color', d => d.color)
            .html(d => d.name + ': ' + d.values.find(h => h.date === yPos)?.value)
            .append('div')
            .attr('class', 'tooltip-content-data')
            .html(d =>
              `<span class="tooltip-content-data__data in">
                            <span class="data-label in">IN </span>
                            <span class="data-data">
                              <img src="images/E/DASHBOARD/in-icon.svg" alt="">
                              ${ d.values.find(h => h.date === yPos)?.in }
                            </span>
                          </span>
                          <span class="tooltip-content-data-line"></span>
                          <span class="tooltip-content-data__data out">
                            <span class="data-label out">OUT </span>
                            <span class="data-data">
                             <img src="images/E/DASHBOARD/out-icon.svg" alt="">
                            ${ d.values.find(h => h.date === yPos)?.out }
                            </div>
                          </span>
                      `
            )
        })

      function leftPosition () {
        const width = document.querySelector('body').clientWidth
        if (size === 'wide') {
          if (d3.event.pageX <= 600) {
            return `calc(${ d3.event.pageX }px - 200px)`
          } else {
            return `calc(${ d3.event.pageX }px - 500px)`
          }
        } else {
          if (d3.event.pageX <= 550) {
            if (width <= 800 && d3.event.pageX >= width/2) {
              return `calc(${d3.event.pageX}px - 300px)`
            }
            if (width <= 1200) {
              return `calc(${d3.event.pageX}px)`
            }

            return `calc(${ d3.event.pageX }px - 200px)`
          } else {
            if(width <= 800) {
              return `calc(${d3.event.pageX}px - 300px)`
            }
            if(width <= 950) {
              return `calc(${d3.event.pageX}px - 35vw)`
            }
            if(width <= 1200) {
              return `calc(${d3.event.pageX}px - 30vw)`
            }
            if(width <= 1300) {
              return `calc(${d3.event.pageX}px - 40vw)`
            }
            if (width <= 1550) {
              return `calc(${ d3.event.pageX }px - 35vw)`
            }

            return `calc(${ d3.event.pageX }px - 500px)`
          }
        }
      }

      function removeTooltip () {
        if (tooltip) tooltip.style('display', 'none')
      }
    }

    const lineChartData = [
      {
        'name': '생산',
        'color': '#4D94C2',
        'values': [
          {
            'date': '10월 1주',
            'value': 23775,
            'in': '1K',
            'out': '2K'
          },
          {
            'date': '10월 2주',
            'value': 34268,
            'in': '2K',
            'out': '3K'
          },
          {
            'date': '10월 3주',
            'value': 56772,
            'in': '4K',
            'out': '5K'
          },
          {
            'date': '10월 4주',
            'value': 69073,
            'in': '2K',
            'out': '3K'
          },
          {
            'date': '11월 1주',
            'value': 105862,
            'in': '10K',
            'out': '2K'
          },
          {
            'date': '11월 2주',
            'value': 34268,
            'in': '5K',
            'out': '4K'
          },
          {
            'date': '11월 3주',
            'value': 10000,
            'in': '40K',
            'out': '35K'
          },
          {
            'date': '11월 4주',
            'value': 23667,
            'in': '4K',
            'out': '35K'
          },
          {
            'date': '11월 5주',
            'value': 29760,
            'in': '20K',
            'out': '25K'
          },
          {
            'date': '12월 1주',
            'value': 33871,
            'in': '30K',
            'out': '45K'
          },
          {
            'date': '12월 2주',
            'value': 37253,
            'in': '5K',
            'out': '3K'
          }
        ]
      },
      {
        'name': '매출',
        'color': '#fe8a8a',
        'values': [
          {
            'date': '10월 1주',
            'value': 100000,
            'in': '40K',
            'out': '35K'
          },
          {
            'date': '10월 2주',
            'value': 36684,
            'in': '4K',
            'out': '3K'
          },
          {
            'date': '10월 3주',
            'value': 48423,
            'in': '40K',
            'out': '35K'
          },
          {
            'date': '10월 4주',
            'value': 52561,
            'in': '2K',
            'out': '5K'
          },
          {
            'date': '11월 1주',
            'value': 63717,
            'in': '40K',
            'out': '35K'
          },
          {
            'date': '11월 2주',
            'value': 78231,
            'in': '10K',
            'out': '20K'
          },
          {
            'date': '11월 3주',
            'value': 88750,
            'in': '40K',
            'out': '35K'
          },
          {
            'date': '11월 4주',
            'value': 10000,
            'in': '40K',
            'out': '35K'
          },
          {
            'date': '11월 5주',
            'value': 92952,
            'in': '40K',
            'out': '35K'
          },
          {
            'date': '12월 1주',
            'value': 99384,
            'in': '10K',
            'out': '20K'
          },
          {
            'date': '12월 2주',
            'value': 98836,
            'in': '4K',
            'out': '3K'
          }
        ]
      }
    ]

    $(window).on('load', function (e) {
      // window.addEventListener('load', function(event) {
      console.log('로드zzzzz')
      const content = document.querySelector('.js-chart-feed')
      const innerContent = document.querySelector('.js-dashboard-content')
      const width = document.querySelector('body').clientWidth
      if (width <= 1600) {
        drawChart(lineChartData, innerContent.clientWidth, content.clientHeight - 68, 'narrow')
      } else {
        drawChart(lineChartData, innerContent.clientWidth, content.clientHeight - 68, 'wide')
      }
    })
    window.addEventListener('resize', function (event) {
      removeChart('.chart')
      const content = document.querySelector('.js-chart-feed')
      const innerContent = document.querySelector('.js-dashboard-content')
      const width = document.querySelector('body').clientWidth
      if (width <= 1600) {
        drawChart(lineChartData, innerContent.clientWidth, content.clientHeight - 68, 'narrow')
      } else {
        drawChart(lineChartData, innerContent.clientWidth, content.clientHeight - 68, 'wide')
      }
    })
    // 선형차트

    //원차트
    const jsonCircleChart = 'circle-chart-data.json'
    $.getJSON(jsonCircleChart, function (data) {
      circleChart('js-print-circle-chart', data[0])
      circleChart('js-rotary-circle-chart', data[1])
      circleChart('js-release-circle-chart', data[2])
    })

    function circleChart (element, data) {
      const width = 90,
        height = 90,
        twoPi = -2 * Math.PI,
        current = data.currentAmount,
        max = data.standardAmount,
        arc = d3.arc()
          .startAngle(0)
          .innerRadius(width / 3 - 1)
          .outerRadius(width / 3 - 1),
        smallArc = d3.arc()
          .startAngle(0)
          .innerRadius(width / 2 - 8)
          .outerRadius(width / 2 - 8)
      let progress = 0
      const ratio = parseInt(current / max * 100)

      const svg = d3.select(`.${ element }`)
        .append('svg')
        .attr('class', `${ element }-svg`)
        .attr('width', width)
        .attr('height', height)
        .append('g')
        .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')')

      const grad = svg.append('defs').append('linearGradient')
        .attr('id', `${ element }-grid`)
        .attr('x1', '0%')
        .attr('x2', '0%')
        .attr('y1', '0%')
        .attr('y2', '100%')

      grad.append('stop')
        .attr('offset', '0%')
        .style('stop-color', data.color1)

      grad.append('stop')
        .attr('offset', '100%')
        .style('stop-color', data.color2)

      svg.append('path')
        .attr('class', 'inner-circle')
        .attr('stroke-width', '5')
        .attr('stroke', '#edeff4')
        .attr('d', arc.endAngle(twoPi))

      const foreground = svg.append('path')
        .attr('class', 'foreground').attr('stroke-width', '5')
        .attr('stroke', `url(#${ element }-grid)`)
        .attr('fill', 'none')
        .attr('stroke-linecap', 'round')
        .attr('stroke-linejoin', 'round')

      svg.append('text').datum(progress)
        .attr('class', 'text-percentage')
        .attr('fill', '#32373c')
        .attr('font-size', '16')
        .attr('text-anchor', 'middle')
        .attr('y', 5)
        .attr('font-weight', '800')


      // 가운데 수치표시
      function countText (time, progress) {
        const textPercentageContainer = d3.select(`.${ element } .text-percentage`)
        let i = 0
        const intervalTime = Math.abs(time / progress)
        if (progress > 100) {
          const timerID = setInterval(function () {
            i++
            textPercentageContainer.html(`${ i }%`)
            if (i === Math.abs(progress - 100)) clearInterval(timerID)
          }, intervalTime)
        } else if (progress === 100) {
          const timerID = setInterval(function () {
            i++
            textPercentageContainer.html(`${ i }%`)
            if (i === Math.abs(progress)) clearInterval(timerID)
          }, intervalTime)
        } else {
          const timerID = setInterval(function () {
            i++
            textPercentageContainer.html(`${ i }%`)
            if (i === Math.abs(progress)) clearInterval(timerID)
          }, intervalTime)
        }
      }

      countText(1300, ratio)

      const maxCompare = current / max > 1 ? 1 : (current / max)
      const i = d3.interpolate(progress, maxCompare)
      foreground.transition().duration(500).delay(500).tween('progress', function () {
        return function (t) {
          progress = i(t)
          foreground.attr('d', smallArc.endAngle(twoPi * (progress)))
        }
      })
    }

    //원차트

  })


</script>

</body>
</html>
